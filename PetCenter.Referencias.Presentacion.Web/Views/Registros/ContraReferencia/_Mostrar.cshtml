@using PetCenter.Referencias.Presentacion.Web.Resources
@using PetCenter.Referencias.Presentacion.Web.Helpers.Html
@model PetCenter.Referencias.Presentacion.Web.Models.Registros.ContraReferencia.ContraReferenciaEditorModelo

@{
    ViewBag.TituloMenu = "Ver Contrarreferencia";
    Layout = "~/Views/Comun/Inicio/_Estructura.cshtml";
}


@using (Html.BeginSecureForm("Registrar", "ContraReferencia", FormMethod.Post, new { @class = "form-horizontal", role = "form", id = "formContraReferencia" }))
{
    <div class="form-group asistencia-group text-right">
        <div class="asistencia-group text-right">
            @Html.Label("HOJA DE CONTRAREFERENCIA Nro: ", new { @class = "col-sm-5 control-label form-label" })
            <div class="col-sm-2">
                @Html.TextBoxFor(m => m.ContraReferencia.NroContraReferenciaFormato, new { @class = "form-control asistencia-requerido", @disabled = "" })
            </div>
        </div>
    </div>

    <fieldset class="fieldset-filter">
        <legend class="text-muted h5">Datos de la Referencia</legend>

        <div class="form-group asistencia-group">

            <div class="asistencia-group">
                @Html.Label("Nro de Ref: ", new { @class = "col-sm-2 control-label form-label" })
                <div class="col-sm-3">
                    @Html.TextBoxFor(m => m.Referencia.NroSolicitudRefFormato, new { @class = "form-control asistencia-requerido", @disabled = "" })
                </div>


                @Html.Label("Fecha Solicitud: ", new { @class = "col-sm-3 control-label form-label" })
                <div class="col-sm-2">
                    @Html.TextBoxFor(m => m.Referencia.FechaSolicitudRef,
                   Model.Referencia.FechaSolicitudRef.Value.ToString(Formatos.FechaCorta),
                   new { @class = "form-control asistencia-fecha-corta", @disabled = "" })
                </div>

            </div>

        </div>

        <div class="form-group asistencia-group">
            @Html.Label("Clínica referente: ", new { @class = "col-sm-2 control-label form-label" })
            <div class="col-sm-8">
                @Html.TextBoxFor(m => m.Referencia.RazonSocial, new { @class = "form-control asistencia-requerido", @placeholder = "Nro RUC", @disabled = "" })
            </div>
        </div>
</fieldset>

    <fieldset class="fieldset-filter">
        <legend class="text-muted h5">Datos de la Mascota</legend>

        <div class="form-group asistencia-group">

            <div class="form-group  asistencia-group">
                @Html.Label("Nombre: ", new { @class = "col-sm-2 control-label form-label" })
                <div class="col-sm-4">
                    @Html.TextBoxFor(m => m.Mascota.NombreMascota, new { @class = "form-control asistencia-requerido", @disabled = "" })
                </div>


                @Html.Label("Raza: ", new { @class = "col-sm-2 control-label form-label" })
                <div class="col-sm-4">
                    @Html.TextBoxFor(m => m.Mascota.NombreRaza, new { @class = "form-control asistencia-requerido", @disabled = "" })
                </div>
            </div>

        </div>

        <div class="form-group asistencia-group">

            <div class="form-group  asistencia-group">
                @Html.Label("Especie: ", new { @class = "col-sm-2 control-label form-label" })
                <div class="col-sm-4">
                    @Html.TextBoxFor(m => m.Mascota.NombreEspecie, new { @class = "form-control asistencia-requerido", @disabled = "" })
                </div>

                @Html.Label("Fecha Nacimiento: ", new { @class = "col-sm-2 control-label form-label" })
                <div class="col-sm-2">
                    @Html.TextBoxFor(m => m.Mascota.FechaNacimiento,
                   Model.Mascota.FechaNacimiento.Value.ToString(Formatos.FechaCorta),
                   new { @class = "form-control asistencia-fecha-corta", @disabled = "" })
                </div>

            </div>
        </div>

    </fieldset>

    <fieldset class="fieldset-filter">
        <legend class="text-muted h5">Resumen de Historia Clínica</legend>

        <div class="form-group asistencia-group">
            <div class="asistencia-group">
                @Html.Label("Fecha Ingreso: ", new { @class = "col-sm-2 control-label form-label" })
                <div class="col-sm-2">
                    @Html.TextBoxFor(m => m.ContraReferencia.FechaEntrega, Model.ContraReferencia.FechaEntrega.Value.ToString(Formatos.FechaCorta), new { @class = "form-control asistencia-fecha-corta", @disabled = "", @placerholder = "Fecha Ingreso" })
                </div>
            </div>

            <div class="asistencia-group">
                @Html.Label("Fecha Salida: ", new { @class = "col-sm-2 control-label form-label" })
                <div class="col-sm-2">
                    @Html.TextBoxFor(m => m.ContraReferencia.FechaCierre, Model.ContraReferencia.FechaCierre.Value.ToString(Formatos.FechaCorta), new { @class = "form-control asistencia-fecha-corta", @disabled = "", @placerholder = "Fecha Salida" })
                </div>
            </div>
        </div>

        <div class="form-group asistencia-group">
            <div class="asistencia-group">
                @Html.Label("Diagnóstico de Ingreso: ", new { @class = "col-sm-2 control-label form-label" })
                <div class="col-sm-10">
                    @Html.TextAreaFor(m => m.Referencia.Diagnostico, new { @class = "form-control asistencia-requerido", @placeholder = "Diagnóstico de Ingreso", @disabled = "" })
                </div>
            </div>
        </div>

        <div class="form-group asistencia-group">
            <div class="asistencia-group">
                @Html.Label("Diagnóstico de Egreso: ", new { @class = "col-sm-2 control-label form-label" })
                <div class="col-sm-10">
                    @Html.TextAreaFor(m => m.ContraReferencia.Observaciones, new { @class = "form-control asistencia-requerido", @placeholder = "Diagnóstico de Egreso", @disabled = "", @maxlength = "250" })
                </div>
            </div>
        </div>

        <div class="form-group asistencia-group">
            <div class="asistencia-group">
                @Html.Label("Recomendaciones: ", new { @class = "col-sm-2 control-label form-label" })
                <div class="col-sm-10">
                    @Html.TextAreaFor(m => m.ContraReferencia.Resultados, new { @class = "form-control asistencia-requerido", @placeholder = "Recomendaciones e Indicaciones", @disabled = "", @maxlength = "250" })
                </div>
            </div>
        </div>

        <div class="form-group asistencia-group">
            <div class="asistencia-group">
                @Html.Label("Veterinario: ", new { @class = "col-sm-2 control-label form-label text-left" })
                <div class="col-sm-6">
                    @Html.TextBoxFor(m => m.ContraReferencia.NomVeterinario, new { @class = "form-control asistencia-requerido", @placeholder = "Recomendaciones e Indicaciones", @disabled = "", @maxlength = "250" })
                </div>
            </div>
        </div>
    </fieldset>


        <fieldset class="fieldset-filter">
            <legend class="text-muted h5">Atenciones</legend>


            <table class="table table-striped table-bordered table-condensed asistencia-table-grid" id="tab-atenciones">
                <thead>
                    <tr class="asistencia-head">
                        <th scope="col">Descripción</th>
                        <th scope="col">Resultado</th>
                    </tr>
                </thead>
                <tbody>
                    @{
                        foreach (var item in Model.ListaAtenciones)
                        {
                            <tr>
                                <td>@item.NombreServicio</td>
                                <td>@item.Resultado</td>
                            </tr>
                        }
                    }
                </tbody>
            </table>

        </fieldset>


        <fieldset class="fieldset-filter">
            <legend class="text-muted h5">Valorización</legend>

            <table class="table table-striped table-bordered table-condensed asistencia-table-grid" id="tab-valorizacion">
                <thead>
                    <tr class="asistencia-head">
                        <th scope="col">Descripción</th>
                        <th scope="col">Cantidad</th>
                        <th scope="col">Precio</th>
                        <th scope="col">Descuento</th>
                        <th scope="col">Precio Neto</th>
                    </tr>
                </thead>
                <tbody>
                    @{
                        foreach (var item in Model.ListaAtenciones)
                        {
                            <tr>
                                <td>@item.NombreServicio</td>
                                <td>@item.Cantidad</td>
                                <td class="asistencia-column-righ">@item.TarifaBase</td>
                                <td class="asistencia-column-righ">@item.Descuento</td>
                                <td class="asistencia-column-righ">@item.ValorNeto</td>
                            </tr>
                        }
                    }
                    <tr>
                        <td colspan="4" class="asistencia-column-righ">Total</td>
                        <td class="asistencia-column-righ">
                            @Model.ListaAtenciones.Sum(p=> p.ValorNeto)
                        </td>
                    </tr>
                </tbody>
            </table>

        </fieldset>
                        }

<div class="asistencia-group">
    <div class="col-sm-12 text-center">
        <button class="btn btn-primary" type="button" onclick="location.href='@Url.Action("Index", "ContraReferencia")'">@Botones.BtnSalir</button>
    </div>
</div>

.